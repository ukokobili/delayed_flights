version: 2

models:
  - name: facts
    description: >-
      CTE for processing weather data by airport, including surrogate keys for weather data and selection of weather metrics.
    columns:
      - name: fct_weather_key
        description: Unique key for each weather record.
        meta:
          dimension:
            type: string

      - name: airport_key
        description: Unique key for each airport.
        meta:
          dimension:
            type: string

      - name: weather_date
        description: Date of the weather data.
        meta:
          dimension:
            type: date

      - name: tavg
        description: Average temperature.
        meta:
          dimension:
            type: float

      - name: tmin
        description: Minimum temperature.
        meta:
          dimension:
            type: float

      - name: tmax
        description: Maximum temperature.
        meta:
          dimension:
            type: float

      - name: prcp
        description: Precipitation amount.
        meta:
          dimension:
            type: float

      - name: snow
        description: Snowfall amount.
        meta:
          dimension:
            type: float

      - name: wdir
        description: Wind direction.
        meta:
          dimension:
            type: float

      - name: wspd
        description: Wind speed.
        meta:
          dimension:
            type: float

      - name: pres
        description: Atmospheric pressure.
        meta:
          dimension:
            type: float

      - name: loaded_at
        description: Timestamp when the data was processed.
        meta:
          dimension:
            type: timestamp

    config:
      materialized: table
